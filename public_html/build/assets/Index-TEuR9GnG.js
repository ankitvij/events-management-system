import{c as Se,a as ke,r as te,j as t,L as M,b as I,H as $e}from"./app-PA2z4sOg.js";import{A as Ce}from"./app-layout-B3SxiQxP.js";import{P as Le}from"./public-header-DBy9BUm6.js";import{L as Ee}from"./list-controls-VAfzfVSV.js";/* empty css            */import"./button-BMhgMQMR.js";import"./index-Q4R35CyV.js";import"./index--rnlBiEa.js";import"./index-BDqSilVs.js";const We=[{title:"Events",href:"/events"}];function Oe(o){const e=Se.c(90),{events:c}=o,B=ke(),r=B.props?.auth?.user,d=B.props?.showHomeHeader??!1,l=typeof window<"u"?new URLSearchParams(window.location.search):null;B.props?.cities,B.props?.countries;let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O=function(a){if(typeof window>"u")return;const i=new URLSearchParams(window.location.search),ve=i.get("sort")??"";let ge;ve===`${a}_asc`?ge=`${a}_desc`:ge=`${a}_asc`,i.set("sort",ge),i.delete("page"),I.get(`/events${i.toString()?`?${i.toString()}`:""}`)},e[0]=O):O=e[0];const D=O;let z;e[1]===Symbol.for("react.memo_cache_sentinel")?(z=function(a,i){I.put(`/events/${a}/active`,{active:i})},e[1]=z):z=e[1];const se=z,be=l?.get("q")??"",[n,je]=te.useState(be),U=te.useRef(null),fe=te.useRef(!0);let F,G;e[2]!==n?(F=()=>{if(fe.current){fe.current=!1;return}return U.current&&clearTimeout(U.current),U.current=window.setTimeout(()=>{const s=new URLSearchParams(window.location.search);n?s.set("q",n):s.delete("q"),I.get(`/events${s.toString()?`?${s.toString()}`:""}`)},300),()=>{U.current&&clearTimeout(U.current)}},G=[n],e[2]=n,e[3]=F,e[4]=G):(F=e[3],G=e[4]),te.useEffect(F,G);const le=Ce,re=We;let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs($e,{children:[t.jsx("title",{children:"Events"}),t.jsx("meta",{name:"description",content:"Browse upcoming events."})]}),e[5]=m):m=e[5];let x;e[6]!==d?(x=d&&t.jsx(Le,{}),e[6]=d,e[7]=x):x=e[7];const ae=d?"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8":"p-4";let J;e[8]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("div",{className:"flex items-center gap-4"}),e[8]=J):J=e[8];let u;e[9]!==r||e[10]!==d?(u=!r&&!d?t.jsxs("div",{className:"text-sm",children:[t.jsx(M,{href:"/login",className:"text-blue-600 mr-3",children:"Log in"}),t.jsx(M,{href:"/register",className:"text-blue-600",children:"Sign up"})]}):null,e[9]=r,e[10]=d,e[11]=u):u=e[11];let p;e[12]!==u?(p=t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[J,u]}),e[12]=u,e[13]=p):p=e[13];let h;e[14]!==c.links?(h=t.jsx(Ee,{path:"/events",links:c.links,showSearch:!1}),e[14]=c.links,e[15]=h):h=e[15];let g;e[16]!==r?(g=r?t.jsx("button",{type:"button",onClick:Re,className:"bg-black text-white px-6 py-2 rounded-full text-lg font-semibold shadow-sm cursor-pointer",children:"New Event"}):null,e[16]=r,e[17]=g):g=e[17];let f;e[18]!==h||e[19]!==g?(f=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h,g]}),e[18]=h,e[19]=g,e[20]=f):f=e[20];const _e="hidden md:grid md:grid-cols-12 gap-4 mb-2 text-sm text-muted";let K;e[21]===Symbol.for("react.memo_cache_sentinel")?(K=()=>D("title"),e[21]=K):K=e[21];const ce=l?.get("sort")==="title_asc"?"ascending":l?.get("sort")==="title_desc"?"descending":"none",ie=l?.get("sort")?.startsWith("title_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let b;e[22]!==ie?(b=t.jsx("span",{className:"ml-1 text-xs",children:ie}),e[22]=ie,e[23]=b):b=e[23];let j;e[24]!==ce||e[25]!==b?(j=t.jsxs("button",{onClick:K,className:"text-left text-white bg-black px-3 py-2 rounded cursor-pointer","aria-sort":ce,"aria-label":"Sort by title",children:["Event",b]}),e[24]=ce,e[25]=b,e[26]=j):j=e[26];let Q;e[27]===Symbol.for("react.memo_cache_sentinel")?(Q=s=>je(s.target.value),e[27]=Q):Q=e[27];let _;e[28]!==n?(_=t.jsx("div",{className:"ml-4 flex-1",children:t.jsx("input",{value:n,onChange:Q,placeholder:"Search events...",className:"w-full max-w-[60rem] border-2 border-gray-800 px-3 py-1"})}),e[28]=n,e[29]=_):_=e[29];let y;e[30]!==j||e[31]!==_?(y=t.jsxs("div",{className:"md:col-span-7 flex items-center justify-between",children:[j,_]}),e[30]=j,e[31]=_,e[32]=y):y=e[32];let V;e[33]===Symbol.for("react.memo_cache_sentinel")?(V=()=>D("country"),e[33]=V):V=e[33];const ne=l?.get("sort")==="country_asc"?"ascending":l?.get("sort")==="country_desc"?"descending":"none",oe=l?.get("sort")?.startsWith("country_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let N;e[34]!==oe?(N=t.jsx("span",{className:"ml-1 text-xs",children:oe}),e[34]=oe,e[35]=N):N=e[35];let w;e[36]!==ne||e[37]!==N?(w=t.jsxs("button",{onClick:V,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":ne,children:["Country",N]}),e[36]=ne,e[37]=N,e[38]=w):w=e[38];let X;e[39]===Symbol.for("react.memo_cache_sentinel")?(X=()=>D("city"),e[39]=X):X=e[39];const de=l?.get("sort")==="city_asc"?"ascending":l?.get("sort")==="city_desc"?"descending":"none",me=l?.get("sort")?.startsWith("city_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let v;e[40]!==me?(v=t.jsx("span",{className:"ml-1 text-xs",children:me}),e[40]=me,e[41]=v):v=e[41];let S;e[42]!==de||e[43]!==v?(S=t.jsxs("button",{onClick:X,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":de,children:["City",v]}),e[42]=de,e[43]=v,e[44]=S):S=e[44];let Y;e[45]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>D("start"),e[45]=Y):Y=e[45];const xe=l?.get("sort")==="start_asc"?"ascending":l?.get("sort")==="start_desc"?"descending":"none",ue=l?.get("sort")?.startsWith("start_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let k;e[46]!==ue?(k=t.jsx("span",{className:"ml-1 text-xs",children:ue}),e[46]=ue,e[47]=k):k=e[47];let $;e[48]!==xe||e[49]!==k?($=t.jsxs("button",{onClick:Y,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":xe,children:["Start",k]}),e[48]=xe,e[49]=k,e[50]=$):$=e[50];let C;e[51]===Symbol.for("react.memo_cache_sentinel")?(C=()=>D("active"),e[51]=C):C=e[51];const ye="md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded",pe=l?.get("sort")==="active_asc"?"ascending":l?.get("sort")==="active_desc"?"descending":"none",Ne="Active",we="ml-1 text-xs",he=l?.get("sort")?.startsWith("active_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let L;e[52]!==he?(L=t.jsx("span",{className:we,children:he}),e[52]=he,e[53]=L):L=e[53];let E;e[54]!==C||e[55]!==pe||e[56]!==L?(E=t.jsxs("button",{onClick:C,className:ye,"aria-sort":pe,children:[Ne,L]}),e[54]=C,e[55]=pe,e[56]=L,e[57]=E):E=e[57];let Z;e[58]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("div",{className:"md:col-span-1 text-center",children:"Actions"}),e[58]=Z):Z=e[58];let W;e[59]!==y||e[60]!==w||e[61]!==S||e[62]!==$||e[63]!==E?(W=t.jsxs("div",{className:_e,children:[y,w,S,$,E,Z]}),e[59]=y,e[60]=w,e[61]=S,e[62]=$,e[63]=E,e[64]=W):W=e[64];let H;e[65]!==r||e[66]!==c.data||e[67]!==se?(H=c.data?.map(s=>t.jsx("div",{className:"border rounded p-3",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center",children:[t.jsxs("div",{className:"md:col-span-7 flex items-center gap-3",children:[t.jsx("div",{className:"w-20 h-12 flex-shrink-0",children:t.jsx("img",{src:s.image_thumbnail?`/storage/${s.image_thumbnail}`:s.image?`/storage/${s.image}`:"/images/default-event.svg",alt:s.title,className:"w-full h-full object-cover rounded"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(M,{href:`/events/${s.id}`,className:"text-lg font-medium",children:s.title}),!s.active&&t.jsx("span",{className:"text-xs text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded",children:"Inactive"})]}),t.jsx("div",{className:"text-sm text-muted",children:s.location}),s.organisers&&s.organisers.length>0&&t.jsxs("div",{className:"text-sm text-muted mt-1",children:["Organisers: ",s.organisers.map((a,i)=>t.jsxs("span",{children:[r?t.jsx(M,{href:`/organisers/${a.id}`,className:"text-blue-600",children:a.name}):t.jsx("span",{children:a.name}),i<s.organisers.length-1?", ":""]},a.id))]})]})]}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.country??"â€”"}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.city??"â€”"}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.start_at?new Date(s.start_at).toLocaleDateString():"â€”"}),t.jsx("div",{className:"md:col-span-1 text-center",children:r&&(r.is_super_admin||s.user&&r.id===s.user.id)?t.jsx("button",{type:"button",onClick:()=>se(s.id,!s.active),className:"text-xl cursor-pointer mr-2","aria-pressed":s.active,"aria-label":s.title+" active toggle",children:s.active?"âœ…":"â¬œ"}):s.active?t.jsx("span",{className:"text-xs text-green-700 bg-green-100 px-2 py-0.5 rounded",children:"Active"}):t.jsx("span",{className:"text-xs text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded",children:"Inactive"})}),t.jsxs("div",{className:"md:col-span-1 text-center",children:[t.jsx("button",{type:"button",onClick:()=>I.get(`/events/${s.id}/edit`),className:"ml-2 text-lg text-black cursor-pointer","aria-label":`Edit ${s.title}`,children:"âœï¸"}),t.jsx("button",{type:"button",onClick:()=>{confirm("Delete this event?")&&I.delete(`/events/${s.id}`)},className:"ml-2 text-lg text-black cursor-pointer","aria-label":`Delete ${s.title}`,children:"ğŸ—‘ï¸"})]})]})},s.id)),e[65]=r,e[66]=c.data,e[67]=se,e[68]=H):H=e[68];let R;e[69]!==H?(R=t.jsx("div",{className:"space-y-3",children:H}),e[69]=H,e[70]=R):R=e[70];let q;e[71]!==c.links?(q=c.links?.map(He),e[71]=c.links,e[72]=q):q=e[72];let A;e[73]!==q?(A=t.jsx("div",{className:"mt-4",children:q}),e[73]=q,e[74]=A):A=e[74];let P;e[75]!==W||e[76]!==R||e[77]!==A?(P=t.jsxs("div",{children:[W,R,A]}),e[75]=W,e[76]=R,e[77]=A,e[78]=P):P=e[78];let T;e[79]!==p||e[80]!==f||e[81]!==P||e[82]!==ae?(T=t.jsxs("div",{className:ae,children:[p,f,P]}),e[79]=p,e[80]=f,e[81]=P,e[82]=ae,e[83]=T):T=e[83];let ee;return e[84]!==le||e[85]!==re||e[86]!==T||e[87]!==m||e[88]!==x?(ee=t.jsxs(le,{breadcrumbs:re,children:[m,x,T]}),e[84]=le,e[85]=re,e[86]=T,e[87]=m,e[88]=x,e[89]=ee):ee=e[89],ee}function He(o){let e=o.label??"";return e=e.replace(/Previous/gi,"Â«").replace(/Next/gi,"Â»"),e=e.replace(/&laquo;|Â«/g,"Â«").replace(/&raquo;|Â»/g,"Â»").replace(/&lsaquo;|â€¹/g,"Â«").replace(/&rsaquo;|â€º/g,"Â»"),o.url?t.jsx(M,{href:o.url,className:o.active?"font-medium px-2":"text-muted px-2",as:"a",preserveScroll:!0,children:t.jsx("span",{dangerouslySetInnerHTML:{__html:e}})},e+String(o.url)):t.jsx("span",{className:"px-2",dangerouslySetInnerHTML:{__html:e}},e)}function Re(){return I.get("/events/create")}export{Oe as default};

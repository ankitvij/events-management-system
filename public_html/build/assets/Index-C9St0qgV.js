import{c as Se,u as $e,b as ee,j as t,L as T,r as U,H as ke}from"./app-BBhRT0BT.js";import{A as Ce}from"./ActionButton-CuQc8aUE.js";import{L as We}from"./list-controls-CJEBv0dA.js";import{O as Le}from"./organiser-placeholder-DBtG9XSp.js";import{A as Ee}from"./app-layout-pbUr-j7-.js";/* empty css            */import"./button-DSSG-NsU.js";import"./index-D4P6CcNm.js";import"./index-gdzwEDWp.js";import"./index-BDqSilVs.js";const Re=[{title:"Events",href:"/events"}];function Fe(i){const e=Se.c(87),{events:n}=i,fe=$e(),c=fe.props?.auth?.user,B=fe.props?.showHomeHeader??!1,l=typeof window<"u"?new URLSearchParams(window.location.search):null;let D;e[0]===Symbol.for("react.memo_cache_sentinel")?(D=function(r){if(typeof window>"u")return;const a=new URLSearchParams(window.location.search),he=a.get("sort")??"";let Z;he===`${r}_asc`?Z=`${r}_desc`:Z=`${r}_asc`,a.set("sort",Z),a.delete("page"),U.get(`/events${a.toString()?`?${a.toString()}`:""}`)},e[0]=D):D=e[0];const I=D;let O;e[1]===Symbol.for("react.memo_cache_sentinel")?(O=function(r,a){U.put(`/events/${r}/active`,{active:a})},e[1]=O):O=e[1];const te=O,je=l?.get("q")??"",[o,be]=ee.useState(je),P=ee.useRef(null),ge=ee.useRef(!0);let M,z;e[2]!==o?(M=()=>{if(ge.current){ge.current=!1;return}return P.current&&clearTimeout(P.current),P.current=window.setTimeout(()=>{const s=new URLSearchParams(window.location.search);o?s.set("q",o):s.delete("q"),U.get(`/events${s.toString()?`?${s.toString()}`:""}`)},300),()=>{P.current&&clearTimeout(P.current)}},z=[o],e[2]=o,e[3]=M,e[4]=z):(M=e[3],z=e[4]),ee.useEffect(M,z);const se=Ee,le=Re;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsxs(ke,{children:[t.jsx("title",{children:"Events"}),t.jsx("meta",{name:"description",content:"Browse upcoming events."})]}),e[5]=d):d=e[5];const re=B?"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8":"p-4";let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("div",{className:"flex items-center gap-4"}),e[6]=F):F=e[6];let m;e[7]!==c||e[8]!==B?(m=!c&&!B?t.jsxs("div",{className:"text-sm",children:[t.jsx(T,{href:"/login",className:"text-blue-600 mr-3",children:"Log in"}),t.jsx(T,{href:"/register",className:"text-blue-600",children:"Sign up"})]}):null,e[7]=c,e[8]=B,e[9]=m):m=e[9];let x;e[10]!==m?(x=t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F,m]}),e[10]=m,e[11]=x):x=e[11];let u;e[12]!==n.links?(u=t.jsx(We,{path:"/events",links:n.links,showSearch:!1}),e[12]=n.links,e[13]=u):u=e[13];let p;e[14]!==c?(p=c?t.jsx(Ce,{href:"/events/create",children:"New Event"}):null,e[14]=c,e[15]=p):p=e[15];let h;e[16]!==u||e[17]!==p?(h=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u,p]}),e[16]=u,e[17]=p,e[18]=h):h=e[18];const _e="hidden md:grid md:grid-cols-12 gap-4 p-3 text-sm text-muted";let G;e[19]===Symbol.for("react.memo_cache_sentinel")?(G=()=>I("title"),e[19]=G):G=e[19];const ae=l?.get("sort")==="title_asc"?"ascending":l?.get("sort")==="title_desc"?"descending":"none",ce=l?.get("sort")?.startsWith("title_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let f;e[20]!==ce?(f=t.jsx("span",{className:"ml-1 text-xs",children:ce}),e[20]=ce,e[21]=f):f=e[21];let g;e[22]!==ae||e[23]!==f?(g=t.jsxs("button",{onClick:G,className:"text-left text-white bg-black px-3 py-2 rounded cursor-pointer","aria-sort":ae,"aria-label":"Sort by title",children:["Event",f]}),e[22]=ae,e[23]=f,e[24]=g):g=e[24];let J;e[25]===Symbol.for("react.memo_cache_sentinel")?(J=s=>be(s.target.value),e[25]=J):J=e[25];let j;e[26]!==o?(j=t.jsx("div",{className:"flex-1",children:t.jsx("input",{value:o,onChange:J,placeholder:"Search events...",className:"w-full max-w-[60rem] border-2 border-gray-800 px-3 py-1"})}),e[26]=o,e[27]=j):j=e[27];let b;e[28]!==g||e[29]!==j?(b=t.jsxs("div",{className:"md:col-span-6 flex items-center justify-between",children:[g,j]}),e[28]=g,e[29]=j,e[30]=b):b=e[30];let K;e[31]===Symbol.for("react.memo_cache_sentinel")?(K=()=>I("country"),e[31]=K):K=e[31];const ie=l?.get("sort")==="country_asc"?"ascending":l?.get("sort")==="country_desc"?"descending":"none",ne=l?.get("sort")?.startsWith("country_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let _;e[32]!==ne?(_=t.jsx("span",{className:"ml-1 text-xs",children:ne}),e[32]=ne,e[33]=_):_=e[33];let N;e[34]!==ie||e[35]!==_?(N=t.jsxs("button",{onClick:K,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":ie,children:["Country",_]}),e[34]=ie,e[35]=_,e[36]=N):N=e[36];let Q;e[37]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>I("city"),e[37]=Q):Q=e[37];const oe=l?.get("sort")==="city_asc"?"ascending":l?.get("sort")==="city_desc"?"descending":"none",de=l?.get("sort")?.startsWith("city_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let y;e[38]!==de?(y=t.jsx("span",{className:"ml-1 text-xs",children:de}),e[38]=de,e[39]=y):y=e[39];let v;e[40]!==oe||e[41]!==y?(v=t.jsxs("button",{onClick:Q,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":oe,children:["City",y]}),e[40]=oe,e[41]=y,e[42]=v):v=e[42];let V;e[43]===Symbol.for("react.memo_cache_sentinel")?(V=()=>I("start"),e[43]=V):V=e[43];const me=l?.get("sort")==="start_asc"?"ascending":l?.get("sort")==="start_desc"?"descending":"none",xe=l?.get("sort")?.startsWith("start_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let w;e[44]!==xe?(w=t.jsx("span",{className:"ml-1 text-xs",children:xe}),e[44]=xe,e[45]=w):w=e[45];let S;e[46]!==me||e[47]!==w?(S=t.jsxs("button",{onClick:V,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":me,children:["Start",w]}),e[46]=me,e[47]=w,e[48]=S):S=e[48];let $;e[49]===Symbol.for("react.memo_cache_sentinel")?($=()=>I("active"),e[49]=$):$=e[49];const Ne="md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded",ue=l?.get("sort")==="active_asc"?"ascending":l?.get("sort")==="active_desc"?"descending":"none",ye="Active",ve="ml-1 text-xs",pe=l?.get("sort")?.startsWith("active_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let k;e[50]!==pe?(k=t.jsx("span",{className:ve,children:pe}),e[50]=pe,e[51]=k):k=e[51];let C;e[52]!==$||e[53]!==ue||e[54]!==k?(C=t.jsxs("button",{onClick:$,className:Ne,"aria-sort":ue,children:[ye,k]}),e[52]=$,e[53]=ue,e[54]=k,e[55]=C):C=e[55];let X;e[56]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"md:col-span-1 text-center",children:"Actions"}),e[56]=X):X=e[56];let W;e[57]!==b||e[58]!==N||e[59]!==v||e[60]!==S||e[61]!==C?(W=t.jsxs("div",{className:_e,children:[b,N,v,S,C,X]}),e[57]=b,e[58]=N,e[59]=v,e[60]=S,e[61]=C,e[62]=W):W=e[62];let L;e[63]!==c||e[64]!==n.data||e[65]!==te?(L=n.data?.map(s=>t.jsx("div",{className:"border rounded p-3",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center",children:[t.jsxs("div",{className:"md:col-span-6 flex items-center gap-3",children:[t.jsx("div",{className:"w-20 h-12 flex-shrink-0",children:(()=>{const r=s.image_thumbnail_url??s.image_url??s.image_thumbnail??s.image??"";let a="/images/default-event.svg";r&&(r.startsWith("http")||r.startsWith("/storage/")?a=r:r.startsWith("storage/")?a=`/${r}`:a=`/storage/${r}`);const he=s.updated_at??s.created_at,we=qe(a,he);return t.jsx("img",{src:we,alt:s.title,className:"w-full h-full object-cover rounded"})})()}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(T,{href:`/events/${s.id}`,className:"text-lg font-medium",children:s.title}),!s.active&&t.jsx("span",{className:"text-xs text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded",children:"Inactive"})]}),t.jsx("div",{className:"text-sm text-muted",children:s.location}),s.organisers&&s.organisers.length>0&&(c?t.jsxs("div",{className:"text-sm text-muted mt-1",children:["Organisers: ",s.organisers.map((r,a)=>t.jsxs("span",{children:[t.jsx(T,{href:`/organisers/${r.id}`,className:"text-blue-600",children:r.name}),a<(s.organisers?.length??0)-1?", ":""]},r.id))]}):t.jsx(Le,{}))]})]}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.country??"â€”"}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.city??"â€”"}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.start_at?new Date(s.start_at).toLocaleDateString():"â€”"}),t.jsx("div",{className:"md:col-span-1 text-center",children:c&&(c.is_super_admin||s.user&&c.id===s.user.id)?t.jsx("button",{type:"button",onClick:()=>te(s.id,!s.active),className:"text-xl cursor-pointer mr-2","aria-pressed":s.active,"aria-label":s.title+" active toggle",children:s.active?"âœ…":"â¬œ"}):s.active?t.jsx("span",{className:"text-xs text-green-700 bg-green-100 px-2 py-0.5 rounded",children:"Active"}):t.jsx("span",{className:"text-xs text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded",children:"Inactive"})}),t.jsxs("div",{className:"md:col-span-1 text-center",children:[t.jsx("button",{type:"button",onClick:()=>U.get(`/events/${s.id}/edit`),className:"ml-2 text-lg text-black cursor-pointer","aria-label":`Edit ${s.title}`,children:"âœï¸"}),t.jsx("button",{type:"button",onClick:()=>{confirm("Delete this event?")&&U.delete(`/events/${s.id}`)},className:"ml-2 text-lg text-black cursor-pointer","aria-label":`Delete ${s.title}`,children:"ğŸ—‘ï¸"})]}),t.jsx("div",{className:"md:col-span-1 text-center",children:t.jsx(T,{href:`/events/${s.id}#tickets`,className:"text-blue-600",children:"Tickets"})})]})},s.id)),e[63]=c,e[64]=n.data,e[65]=te,e[66]=L):L=e[66];let E;e[67]!==L?(E=t.jsx("div",{className:"space-y-3",children:L}),e[67]=L,e[68]=E):E=e[68];let R;e[69]!==n.links?(R=n.links?.map(Ae),e[69]=n.links,e[70]=R):R=e[70];let A;e[71]!==R?(A=t.jsx("div",{className:"mt-4",children:R}),e[71]=R,e[72]=A):A=e[72];let q;e[73]!==W||e[74]!==E||e[75]!==A?(q=t.jsxs("div",{children:[W,E,A]}),e[73]=W,e[74]=E,e[75]=A,e[76]=q):q=e[76];let H;e[77]!==x||e[78]!==h||e[79]!==q||e[80]!==re?(H=t.jsxs("div",{className:re,children:[x,h,q]}),e[77]=x,e[78]=h,e[79]=q,e[80]=re,e[81]=H):H=e[81];let Y;return e[82]!==se||e[83]!==le||e[84]!==H||e[85]!==d?(Y=t.jsxs(se,{breadcrumbs:le,children:[d,H]}),e[82]=se,e[83]=le,e[84]=H,e[85]=d,e[86]=Y):Y=e[86],Y}function Ae(i){let e=i.label??"";return e=e.replace(/Previous/gi,"Â«").replace(/Next/gi,"Â»"),e=e.replace(/&laquo;|Â«/g,"Â«").replace(/&raquo;|Â»/g,"Â»").replace(/&lsaquo;|â€¹/g,"Â«").replace(/&rsaquo;|â€º/g,"Â»"),i.url?t.jsx(T,{href:i.url,className:i.active?"font-medium px-2":"text-muted px-2",as:"a",preserveScroll:!0,children:t.jsx("span",{dangerouslySetInnerHTML:{__html:e}})},e+String(i.url)):t.jsx("span",{className:"px-2",dangerouslySetInnerHTML:{__html:e}},e)}function qe(i,e){if(!e)return i;const n=i.includes("?")?"&":"?";return`${i}${n}v=${encodeURIComponent(e)}`}export{Fe as default};

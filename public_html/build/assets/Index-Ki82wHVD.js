import{c as U,u as q,r as S,j as t,H as E}from"./app-hmbPsEXx.js";import{L as P}from"./list-controls-B_Oqx96Z.js";import{A as k}from"./app-layout-BEvRyK4E.js";/* empty css            */import"./button-BhYuaT1H.js";import"./index-DkFkwEE9.js";import"./index-C3ympALB.js";import"./index-BDqSilVs.js";function J(n){const e=U.c(21),{roles:o,users:R}=n;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=[{title:"Roles",href:"/roles"}],e[0]=m):m=e[0];const L=m,i=q().props?.auth?.user?.id;let p,u,a,f,h,x,g,j,b,v;if(e[1]===Symbol.for("react.memo_cache_sentinel")){const l=typeof window<"u"?new URLSearchParams(window.location.search):null;h=l?.get("sort")??"",a=function(c){if(typeof window>"u")return;const d=new URLSearchParams(window.location.search);Object.entries(c).forEach($=>{const[C,N]=$;N===null||N===""?d.delete(C):d.set(C,N)});const _=d.toString();S.get(`/roles${_?`?${_}`:""}`)},f=function(c,d){confirm("Change role for this user?")&&S.put(`/roles/users/${c}`,{role:d})},u=k,j=L,b=t.jsx(E,{title:"Roles"}),g="p-4",p=P,x=l?.get("q")??"",v=s=>a({q:s||null,page:null}),e[1]=p,e[2]=u,e[3]=a,e[4]=f,e[5]=h,e[6]=x,e[7]=g,e[8]=j,e[9]=b,e[10]=v}else p=e[1],u=e[2],a=e[3],f=e[4],h=e[5],x=e[6],g=e[7],j=e[8],b=e[9],v=e[10];let w;e[11]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(p,{search:x,onSearch:v,sort:h,onSortChange:l=>a({sort:l||null,page:null})}),e[11]=w):w=e[11];let r;if(e[12]!==i||e[13]!==o||e[14]!==R){let l;e[16]!==i||e[17]!==o?(l=s=>t.jsxs("div",{className:"border rounded p-3 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-medium",children:s.name}),t.jsx("div",{className:"text-sm text-muted",children:s.email})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("select",{value:s.role,onChange:c=>f(s.id,c.target.value),className:"input",disabled:s.id===i,children:o.map(A)}),t.jsx("button",{type:"button",onClick:()=>S.post(`/roles/users/${s.id}/undo`),className:"ml-2 text-sm text-red-600",title:"Undo last change",children:"Undo"})]})]},s.id),e[16]=i,e[17]=o,e[18]=l):l=e[18],r=R.map(l),e[12]=i,e[13]=o,e[14]=R,e[15]=r}else r=e[15];let y;return e[19]!==r?(y=t.jsxs(u,{breadcrumbs:j,children:[b,t.jsxs("div",{className:g,children:[w,t.jsx("div",{className:"grid gap-2",children:r})]})]}),e[19]=r,e[20]=y):y=e[20],y}function A(n){return t.jsx("option",{value:n,children:n},n)}export{J as default};

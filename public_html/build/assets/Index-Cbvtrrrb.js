import{c as ve,a as Se,b as Z,j as t,L as D,r as T,H as ke}from"./app-BrTzqn12.js";import{L as $e}from"./list-controls-BtzdO50D.js";import{A as Ce}from"./app-layout-C3O6U_3I.js";/* empty css            */import"./button-Cwod5XeG.js";import"./index-CCZnWZy1.js";import"./index-0TeI-H6u.js";import"./index-BDqSilVs.js";const Le=[{title:"Events",href:"/events"}];function Ue(o){const e=ve.c(87),{events:c}=o,he=Se(),a=he.props?.auth?.user,U=he.props?.showHomeHeader??!1,l=typeof window<"u"?new URLSearchParams(window.location.search):null;let M;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=function(r){if(typeof window>"u")return;const i=new URLSearchParams(window.location.search),we=i.get("sort")??"";let pe;we===`${r}_asc`?pe=`${r}_desc`:pe=`${r}_asc`,i.set("sort",pe),i.delete("page"),T.get(`/events${i.toString()?`?${i.toString()}`:""}`)},e[0]=M):M=e[0];const I=M;let B;e[1]===Symbol.for("react.memo_cache_sentinel")?(B=function(r,i){T.put(`/events/${r}/active`,{active:i})},e[1]=B):B=e[1];const ee=B,fe=l?.get("q")??"",[n,be]=Z.useState(fe),P=Z.useRef(null),ge=Z.useRef(!0);let O,z;e[2]!==n?(O=()=>{if(ge.current){ge.current=!1;return}return P.current&&clearTimeout(P.current),P.current=window.setTimeout(()=>{const s=new URLSearchParams(window.location.search);n?s.set("q",n):s.delete("q"),T.get(`/events${s.toString()?`?${s.toString()}`:""}`)},300),()=>{P.current&&clearTimeout(P.current)}},z=[n],e[2]=n,e[3]=O,e[4]=z):(O=e[3],z=e[4]),Z.useEffect(O,z);const te=Ce,se=Le;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsxs(ke,{children:[t.jsx("title",{children:"Events"}),t.jsx("meta",{name:"description",content:"Browse upcoming events."})]}),e[5]=d):d=e[5];const le=U?"mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8":"p-4";let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("div",{className:"flex items-center gap-4"}),e[6]=F):F=e[6];let m;e[7]!==a||e[8]!==U?(m=!a&&!U?t.jsxs("div",{className:"text-sm",children:[t.jsx(D,{href:"/login",className:"text-blue-600 mr-3",children:"Log in"}),t.jsx(D,{href:"/register",className:"text-blue-600",children:"Sign up"})]}):null,e[7]=a,e[8]=U,e[9]=m):m=e[9];let x;e[10]!==m?(x=t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[F,m]}),e[10]=m,e[11]=x):x=e[11];let u;e[12]!==c.links?(u=t.jsx($e,{path:"/events",links:c.links,showSearch:!1}),e[12]=c.links,e[13]=u):u=e[13];let p;e[14]!==a?(p=a?t.jsx("button",{type:"button",onClick:We,className:"bg-black text-white px-6 py-2 rounded-full text-lg font-semibold shadow-sm cursor-pointer",children:"New Event"}):null,e[14]=a,e[15]=p):p=e[15];let h;e[16]!==u||e[17]!==p?(h=t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[u,p]}),e[16]=u,e[17]=p,e[18]=h):h=e[18];const je="hidden md:grid md:grid-cols-12 gap-4 mb-2 text-sm text-muted";let G;e[19]===Symbol.for("react.memo_cache_sentinel")?(G=()=>I("title"),e[19]=G):G=e[19];const ae=l?.get("sort")==="title_asc"?"ascending":l?.get("sort")==="title_desc"?"descending":"none",re=l?.get("sort")?.startsWith("title_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let g;e[20]!==re?(g=t.jsx("span",{className:"ml-1 text-xs",children:re}),e[20]=re,e[21]=g):g=e[21];let f;e[22]!==ae||e[23]!==g?(f=t.jsxs("button",{onClick:G,className:"text-left text-white bg-black px-3 py-2 rounded cursor-pointer","aria-sort":ae,"aria-label":"Sort by title",children:["Event",g]}),e[22]=ae,e[23]=g,e[24]=f):f=e[24];let J;e[25]===Symbol.for("react.memo_cache_sentinel")?(J=s=>be(s.target.value),e[25]=J):J=e[25];let b;e[26]!==n?(b=t.jsx("div",{className:"ml-4 flex-1",children:t.jsx("input",{value:n,onChange:J,placeholder:"Search events...",className:"w-full max-w-[60rem] border-2 border-gray-800 px-3 py-1"})}),e[26]=n,e[27]=b):b=e[27];let j;e[28]!==f||e[29]!==b?(j=t.jsxs("div",{className:"md:col-span-7 flex items-center justify-between",children:[f,b]}),e[28]=f,e[29]=b,e[30]=j):j=e[30];let K;e[31]===Symbol.for("react.memo_cache_sentinel")?(K=()=>I("country"),e[31]=K):K=e[31];const ce=l?.get("sort")==="country_asc"?"ascending":l?.get("sort")==="country_desc"?"descending":"none",ie=l?.get("sort")?.startsWith("country_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let _;e[32]!==ie?(_=t.jsx("span",{className:"ml-1 text-xs",children:ie}),e[32]=ie,e[33]=_):_=e[33];let y;e[34]!==ce||e[35]!==_?(y=t.jsxs("button",{onClick:K,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":ce,children:["Country",_]}),e[34]=ce,e[35]=_,e[36]=y):y=e[36];let Q;e[37]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>I("city"),e[37]=Q):Q=e[37];const ne=l?.get("sort")==="city_asc"?"ascending":l?.get("sort")==="city_desc"?"descending":"none",oe=l?.get("sort")?.startsWith("city_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let N;e[38]!==oe?(N=t.jsx("span",{className:"ml-1 text-xs",children:oe}),e[38]=oe,e[39]=N):N=e[39];let w;e[40]!==ne||e[41]!==N?(w=t.jsxs("button",{onClick:Q,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":ne,children:["City",N]}),e[40]=ne,e[41]=N,e[42]=w):w=e[42];let V;e[43]===Symbol.for("react.memo_cache_sentinel")?(V=()=>I("start"),e[43]=V):V=e[43];const de=l?.get("sort")==="start_asc"?"ascending":l?.get("sort")==="start_desc"?"descending":"none",me=l?.get("sort")?.startsWith("start_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let v;e[44]!==me?(v=t.jsx("span",{className:"ml-1 text-xs",children:me}),e[44]=me,e[45]=v):v=e[45];let S;e[46]!==de||e[47]!==v?(S=t.jsxs("button",{onClick:V,className:"md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded","aria-sort":de,children:["Start",v]}),e[46]=de,e[47]=v,e[48]=S):S=e[48];let k;e[49]===Symbol.for("react.memo_cache_sentinel")?(k=()=>I("active"),e[49]=k):k=e[49];const _e="md:col-span-1 text-center cursor-pointer bg-black text-white px-3 py-2 rounded",xe=l?.get("sort")==="active_asc"?"ascending":l?.get("sort")==="active_desc"?"descending":"none",ye="Active",Ne="ml-1 text-xs",ue=l?.get("sort")?.startsWith("active_")?l.get("sort")?.endsWith("_asc")?"â–²":"â–¼":"";let $;e[50]!==ue?($=t.jsx("span",{className:Ne,children:ue}),e[50]=ue,e[51]=$):$=e[51];let C;e[52]!==k||e[53]!==xe||e[54]!==$?(C=t.jsxs("button",{onClick:k,className:_e,"aria-sort":xe,children:[ye,$]}),e[52]=k,e[53]=xe,e[54]=$,e[55]=C):C=e[55];let X;e[56]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"md:col-span-1 text-center",children:"Actions"}),e[56]=X):X=e[56];let L;e[57]!==j||e[58]!==y||e[59]!==w||e[60]!==S||e[61]!==C?(L=t.jsxs("div",{className:je,children:[j,y,w,S,C,X]}),e[57]=j,e[58]=y,e[59]=w,e[60]=S,e[61]=C,e[62]=L):L=e[62];let E;e[63]!==a||e[64]!==c.data||e[65]!==ee?(E=c.data?.map(s=>t.jsx("div",{className:"border rounded p-3",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-center",children:[t.jsxs("div",{className:"md:col-span-7 flex items-center gap-3",children:[t.jsx("div",{className:"w-20 h-12 flex-shrink-0",children:t.jsx("img",{src:s.image_thumbnail?`/storage/${s.image_thumbnail}`:s.image?`/storage/${s.image}`:"/images/default-event.svg",alt:s.title,className:"w-full h-full object-cover rounded"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(D,{href:`/events/${s.id}`,className:"text-lg font-medium",children:s.title}),!s.active&&t.jsx("span",{className:"text-xs text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded",children:"Inactive"})]}),t.jsx("div",{className:"text-sm text-muted",children:s.location}),s.organisers&&s.organisers.length>0&&t.jsxs("div",{className:"text-sm text-muted mt-1",children:["Organisers: ",s.organisers.map((r,i)=>t.jsxs("span",{children:[a?t.jsx(D,{href:`/organisers/${r.id}`,className:"text-blue-600",children:r.name}):t.jsx("span",{children:r.name}),i<(s.organisers?.length??0)-1?", ":""]},r.id))]})]})]}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.country??"â€”"}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.city??"â€”"}),t.jsx("div",{className:"md:col-span-1 text-sm text-muted text-center",children:s.start_at?new Date(s.start_at).toLocaleDateString():"â€”"}),t.jsx("div",{className:"md:col-span-1 text-center",children:a&&(a.is_super_admin||s.user&&a.id===s.user.id)?t.jsx("button",{type:"button",onClick:()=>ee(s.id,!s.active),className:"text-xl cursor-pointer mr-2","aria-pressed":s.active,"aria-label":s.title+" active toggle",children:s.active?"âœ…":"â¬œ"}):s.active?t.jsx("span",{className:"text-xs text-green-700 bg-green-100 px-2 py-0.5 rounded",children:"Active"}):t.jsx("span",{className:"text-xs text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded",children:"Inactive"})}),t.jsxs("div",{className:"md:col-span-1 text-center",children:[t.jsx("button",{type:"button",onClick:()=>T.get(`/events/${s.id}/edit`),className:"ml-2 text-lg text-black cursor-pointer","aria-label":`Edit ${s.title}`,children:"âœï¸"}),t.jsx("button",{type:"button",onClick:()=>{confirm("Delete this event?")&&T.delete(`/events/${s.id}`)},className:"ml-2 text-lg text-black cursor-pointer","aria-label":`Delete ${s.title}`,children:"ğŸ—‘ï¸"})]})]})},s.id)),e[63]=a,e[64]=c.data,e[65]=ee,e[66]=E):E=e[66];let W;e[67]!==E?(W=t.jsx("div",{className:"space-y-3",children:E}),e[67]=E,e[68]=W):W=e[68];let R;e[69]!==c.links?(R=c.links?.map(Ee),e[69]=c.links,e[70]=R):R=e[70];let q;e[71]!==R?(q=t.jsx("div",{className:"mt-4",children:R}),e[71]=R,e[72]=q):q=e[72];let H;e[73]!==L||e[74]!==W||e[75]!==q?(H=t.jsxs("div",{children:[L,W,q]}),e[73]=L,e[74]=W,e[75]=q,e[76]=H):H=e[76];let A;e[77]!==x||e[78]!==h||e[79]!==H||e[80]!==le?(A=t.jsxs("div",{className:le,children:[x,h,H]}),e[77]=x,e[78]=h,e[79]=H,e[80]=le,e[81]=A):A=e[81];let Y;return e[82]!==te||e[83]!==se||e[84]!==A||e[85]!==d?(Y=t.jsxs(te,{breadcrumbs:se,children:[d,A]}),e[82]=te,e[83]=se,e[84]=A,e[85]=d,e[86]=Y):Y=e[86],Y}function Ee(o){let e=o.label??"";return e=e.replace(/Previous/gi,"Â«").replace(/Next/gi,"Â»"),e=e.replace(/&laquo;|Â«/g,"Â«").replace(/&raquo;|Â»/g,"Â»").replace(/&lsaquo;|â€¹/g,"Â«").replace(/&rsaquo;|â€º/g,"Â»"),o.url?t.jsx(D,{href:o.url,className:o.active?"font-medium px-2":"text-muted px-2",as:"a",preserveScroll:!0,children:t.jsx("span",{dangerouslySetInnerHTML:{__html:e}})},e+String(o.url)):t.jsx("span",{className:"px-2",dangerouslySetInnerHTML:{__html:e}},e)}function We(){return T.get("/events/create")}export{Ue as default};
